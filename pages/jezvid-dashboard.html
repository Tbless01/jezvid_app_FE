<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Jezvid Nur and Primary School - Management System</title>-->
<!--    <style>-->
<!--        * {-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            box-sizing: border-box;-->
<!--        }-->

<!--        body {-->
<!--            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);-->
<!--            min-height: 100vh;-->
<!--            color: #333;-->
<!--        }-->

<!--        .container {-->
<!--            max-width: 1200px;-->
<!--            margin: 0 auto;-->
<!--            padding: 20px;-->
<!--        }-->

<!--        /* Login Styles */-->
<!--        .login-container {-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            align-items: center;-->
<!--            min-height: 100vh;-->
<!--            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);-->
<!--        }-->

<!--        .login-card {-->
<!--            background: rgba(255, 255, 255, 0.95);-->
<!--            padding: 40px;-->
<!--            border-radius: 20px;-->
<!--            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);-->
<!--            backdrop-filter: blur(10px);-->
<!--            border: 1px solid rgba(255, 255, 255, 0.2);-->
<!--            width: 100%;-->
<!--            max-width: 400px;-->
<!--        }-->

<!--        .school-logo {-->
<!--            text-align: center;-->
<!--            margin-bottom: 30px;-->
<!--        }-->

<!--        .school-logo h1 {-->
<!--            color: #667eea;-->
<!--            font-size: 2.5em;-->
<!--            margin-bottom: 10px;-->
<!--            font-weight: 700;-->
<!--        }-->

<!--        .school-logo p {-->
<!--            color: #666;-->
<!--            font-size: 1.1em;-->
<!--        }-->

<!--        .form-group {-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .form-group label {-->
<!--            display: block;-->
<!--            margin-bottom: 8px;-->
<!--            font-weight: 600;-->
<!--            color: #555;-->
<!--        }-->

<!--        .form-group input {-->
<!--            width: 100%;-->
<!--            padding: 15px;-->
<!--            border: 2px solid #e0e0e0;-->
<!--            border-radius: 10px;-->
<!--            font-size: 16px;-->
<!--            transition: all 0.3s ease;-->
<!--        }-->

<!--        .form-group input:focus {-->
<!--            outline: none;-->
<!--            border-color: #667eea;-->
<!--            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);-->
<!--        }-->

<!--        .btn {-->
<!--            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);-->
<!--            color: white;-->
<!--            padding: 15px 30px;-->
<!--            border: none;-->
<!--            border-radius: 10px;-->
<!--            font-size: 16px;-->
<!--            font-weight: 600;-->
<!--            cursor: pointer;-->
<!--            transition: all 0.3s ease;-->
<!--            width: 100%;-->
<!--        }-->

<!--        .btn:hover {-->
<!--            transform: translateY(-2px);-->
<!--            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);-->
<!--        }-->

<!--        .btn:disabled {-->
<!--            opacity: 0.6;-->
<!--            cursor: not-allowed;-->
<!--            transform: none;-->
<!--        }-->

<!--        /* Dashboard Styles */-->
<!--        .dashboard {-->
<!--            display: none;-->
<!--            background: #f8f9fa;-->
<!--            min-height: 100vh;-->
<!--        }-->

<!--        .header {-->
<!--            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);-->
<!--            color: white;-->
<!--            padding: 20px 0;-->
<!--            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);-->
<!--        }-->

<!--        .header-content {-->
<!--            display: flex;-->
<!--            justify-content: space-between;-->
<!--            align-items: center;-->
<!--            max-width: 1200px;-->
<!--            margin: 0 auto;-->
<!--            padding: 0 20px;-->
<!--        }-->

<!--        .header h1 {-->
<!--            font-size: 1.8em;-->
<!--            font-weight: 700;-->
<!--        }-->

<!--        .header-actions {-->
<!--            display: flex;-->
<!--            gap: 15px;-->
<!--            align-items: center;-->
<!--        }-->

<!--        .logout-btn {-->
<!--            background: rgba(255, 255, 255, 0.2);-->
<!--            color: white;-->
<!--            border: 2px solid rgba(255, 255, 255, 0.3);-->
<!--            padding: 10px 20px;-->
<!--            border-radius: 8px;-->
<!--            cursor: pointer;-->
<!--            transition: all 0.3s ease;-->
<!--        }-->

<!--        .logout-btn:hover {-->
<!--            background: rgba(255, 255, 255, 0.3);-->
<!--        }-->

<!--        .stats-grid {-->
<!--            display: grid;-->
<!--            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));-->
<!--            gap: 20px;-->
<!--            margin-bottom: 30px;-->
<!--        }-->

<!--        .stat-card {-->
<!--            background: white;-->
<!--            padding: 25px;-->
<!--            border-radius: 15px;-->
<!--            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);-->
<!--            border-left: 5px solid;-->
<!--            transition: transform 0.3s ease;-->
<!--        }-->

<!--        .stat-card:hover {-->
<!--            transform: translateY(-5px);-->
<!--        }-->

<!--        .stat-card.total { border-left-color: #667eea; }-->
<!--        .stat-card.management { border-left-color: #f39c12; }-->
<!--        .stat-card.paid { border-left-color: #27ae60; }-->
<!--        .stat-card.outstanding { border-left-color: #e74c3c; }-->

<!--        .stat-value {-->
<!--            font-size: 2.5em;-->
<!--            font-weight: 700;-->
<!--            margin-bottom: 10px;-->
<!--        }-->

<!--        .stat-label {-->
<!--            color: #666;-->
<!--            font-size: 1.1em;-->
<!--        }-->

<!--        .controls-section {-->
<!--            background: white;-->
<!--            padding: 25px;-->
<!--            border-radius: 15px;-->
<!--            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);-->
<!--            margin-bottom: 30px;-->
<!--        }-->

<!--        .controls-grid {-->
<!--            display: grid;-->
<!--            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));-->
<!--            gap: 20px;-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .control-group {-->
<!--            display: flex;-->
<!--            flex-direction: column;-->
<!--            gap: 8px;-->
<!--        }-->

<!--        .control-group label {-->
<!--            font-weight: 600;-->
<!--            color: #555;-->
<!--        }-->

<!--        .control-group select,-->
<!--        .control-group input {-->
<!--            padding: 12px;-->
<!--            border: 2px solid #e0e0e0;-->
<!--            border-radius: 8px;-->
<!--            font-size: 14px;-->
<!--            transition: border-color 0.3s ease;-->
<!--        }-->

<!--        .control-group select:focus,-->
<!--        .control-group input:focus {-->
<!--            outline: none;-->
<!--            border-color: #667eea;-->
<!--        }-->

<!--        .action-buttons {-->
<!--            display: flex;-->
<!--            gap: 15px;-->
<!--            flex-wrap: wrap;-->
<!--        }-->

<!--        .btn-secondary {-->
<!--            background: #6c757d;-->
<!--            color: white;-->
<!--            padding: 12px 24px;-->
<!--            border: none;-->
<!--            border-radius: 8px;-->
<!--            font-weight: 600;-->
<!--            cursor: pointer;-->
<!--            transition: all 0.3s ease;-->
<!--        }-->

<!--        .btn-success {-->
<!--            background: #28a745;-->
<!--        }-->

<!--        .btn-warning {-->
<!--            background: #ffc107;-->
<!--            color: #212529;-->
<!--        }-->

<!--        .btn-info {-->
<!--            background: #17a2b8;-->
<!--        }-->

<!--        .pupils-section {-->
<!--            background: white;-->
<!--            padding: 25px;-->
<!--            border-radius: 15px;-->
<!--            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);-->
<!--        }-->

<!--        .pupils-header {-->
<!--            display: flex;-->
<!--            justify-content: space-between;-->
<!--            align-items: center;-->
<!--            margin-bottom: 20px;-->
<!--            flex-wrap: wrap;-->
<!--            gap: 15px;-->
<!--        }-->

<!--        .search-box {-->
<!--            flex: 1;-->
<!--            max-width: 300px;-->
<!--            position: relative;-->
<!--        }-->

<!--        .search-box input {-->
<!--            width: 100%;-->
<!--            padding: 12px 40px 12px 15px;-->
<!--            border: 2px solid #e0e0e0;-->
<!--            border-radius: 8px;-->
<!--            font-size: 14px;-->
<!--        }-->

<!--        .search-box::after {-->
<!--            content: 'ðŸ”';-->
<!--            position: absolute;-->
<!--            right: 15px;-->
<!--            top: 50%;-->
<!--            transform: translateY(-50%);-->
<!--        }-->

<!--        .pupils-table {-->
<!--            width: 100%;-->
<!--            border-collapse: collapse;-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .pupils-table th,-->
<!--        .pupils-table td {-->
<!--            padding: 15px;-->
<!--            text-align: left;-->
<!--            border-bottom: 1px solid #e0e0e0;-->
<!--        }-->

<!--        .pupils-table th {-->
<!--            background: #f8f9fa;-->
<!--            font-weight: 600;-->
<!--            color: #555;-->
<!--        }-->

<!--        .pupils-table tr:hover {-->
<!--            background: #f8f9fa;-->
<!--        }-->

<!--        .status-badge {-->
<!--            padding: 6px 12px;-->
<!--            border-radius: 20px;-->
<!--            font-size: 12px;-->
<!--            font-weight: 600;-->
<!--        }-->

<!--        .status-active {-->
<!--            background: #d4edda;-->
<!--            color: #155724;-->
<!--        }-->

<!--        .status-inactive {-->
<!--            background: #f8d7da;-->
<!--            color: #721c24;-->
<!--        }-->

<!--        .status-management {-->
<!--            background: #fff3cd;-->
<!--            color: #856404;-->
<!--        }-->

<!--        .action-btn {-->
<!--            padding: 8px 16px;-->
<!--            border: none;-->
<!--            border-radius: 6px;-->
<!--            cursor: pointer;-->
<!--            font-size: 12px;-->
<!--            font-weight: 600;-->
<!--            margin: 2px;-->
<!--            transition: all 0.3s ease;-->
<!--        }-->

<!--        .btn-view { background: #17a2b8; color: white; }-->
<!--        .btn-edit { background: #ffc107; color: #212529; }-->
<!--        .btn-pay { background: #28a745; color: white; }-->

<!--        .pagination {-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            gap: 10px;-->
<!--            margin-top: 20px;-->
<!--        }-->

<!--        .pagination button {-->
<!--            padding: 10px 15px;-->
<!--            border: 2px solid #e0e0e0;-->
<!--            background: white;-->
<!--            border-radius: 6px;-->
<!--            cursor: pointer;-->
<!--            transition: all 0.3s ease;-->
<!--        }-->

<!--        .pagination button:hover,-->
<!--        .pagination button.active {-->
<!--            background: #667eea;-->
<!--            color: white;-->
<!--            border-color: #667eea;-->
<!--        }-->

<!--        /* Modal Styles */-->
<!--        .modal {-->
<!--            display: none;-->
<!--            position: fixed;-->
<!--            z-index: 1000;-->
<!--            left: 0;-->
<!--            top: 0;-->
<!--            width: 100%;-->
<!--            height: 100%;-->
<!--            background-color: rgba(0, 0, 0, 0.5);-->
<!--            backdrop-filter: blur(5px);-->
<!--        }-->

<!--        .modal-content {-->
<!--            background-color: white;-->
<!--            margin: 5% auto;-->
<!--            padding: 30px;-->
<!--            border-radius: 15px;-->
<!--            width: 90%;-->
<!--            max-width: 600px;-->
<!--            max-height: 80vh;-->
<!--            overflow-y: auto;-->
<!--            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);-->
<!--        }-->

<!--        .modal-header {-->
<!--            display: flex;-->
<!--            justify-content: space-between;-->
<!--            align-items: center;-->
<!--            margin-bottom: 20px;-->
<!--            padding-bottom: 15px;-->
<!--            border-bottom: 2px solid #e0e0e0;-->
<!--        }-->

<!--        .close {-->
<!--            color: #aaa;-->
<!--            font-size: 28px;-->
<!--            font-weight: bold;-->
<!--            cursor: pointer;-->
<!--            transition: color 0.3s ease;-->
<!--        }-->

<!--        .close:hover {-->
<!--            color: #667eea;-->
<!--        }-->

<!--        .form-grid {-->
<!--            display: grid;-->
<!--            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));-->
<!--            gap: 20px;-->
<!--        }-->

<!--        .toggle-switch {-->
<!--            position: relative;-->
<!--            display: inline-block;-->
<!--            width: 60px;-->
<!--            height: 34px;-->
<!--        }-->

<!--        .toggle-switch input {-->
<!--            opacity: 0;-->
<!--            width: 0;-->
<!--            height: 0;-->
<!--        }-->

<!--        .slider {-->
<!--            position: absolute;-->
<!--            cursor: pointer;-->
<!--            top: 0;-->
<!--            left: 0;-->
<!--            right: 0;-->
<!--            bottom: 0;-->
<!--            background-color: #ccc;-->
<!--            transition: .4s;-->
<!--            border-radius: 34px;-->
<!--        }-->

<!--        .slider:before {-->
<!--            position: absolute;-->
<!--            content: "";-->
<!--            height: 26px;-->
<!--            width: 26px;-->
<!--            left: 4px;-->
<!--            bottom: 4px;-->
<!--            background-color: white;-->
<!--            transition: .4s;-->
<!--            border-radius: 50%;-->
<!--        }-->

<!--        input:checked + .slider {-->
<!--            background-color: #667eea;-->
<!--        }-->

<!--        input:checked + .slider:before {-->
<!--            transform: translateX(26px);-->
<!--        }-->

<!--        .alert {-->
<!--            padding: 15px;-->
<!--            margin-bottom: 20px;-->
<!--            border-radius: 8px;-->
<!--            font-weight: 600;-->
<!--        }-->

<!--        .alert-success {-->
<!--            background-color: #d4edda;-->
<!--            color: #155724;-->
<!--            border: 1px solid #c3e6cb;-->
<!--        }-->

<!--        .alert-error {-->
<!--            background-color: #f8d7da;-->
<!--            color: #721c24;-->
<!--            border: 1px solid #f5c6cb;-->
<!--        }-->

<!--        .loading {-->
<!--            display: inline-block;-->
<!--            width: 20px;-->
<!--            height: 20px;-->
<!--            border: 3px solid #f3f3f3;-->
<!--            border-top: 3px solid #667eea;-->
<!--            border-radius: 50%;-->
<!--            animation: spin 1s linear infinite;-->
<!--        }-->

<!--        @keyframes spin {-->
<!--            0% { transform: rotate(0deg); }-->
<!--            100% { transform: rotate(360deg); }-->
<!--        }-->

<!--        /* Responsive Design */-->
<!--        @media (max-width: 768px) {-->
<!--            .container {-->
<!--                padding: 10px;-->
<!--            }-->

<!--            .header-content {-->
<!--                flex-direction: column;-->
<!--                gap: 15px;-->
<!--            }-->

<!--            .stats-grid {-->
<!--                grid-template-columns: 1fr;-->
<!--            }-->

<!--            .controls-grid {-->
<!--                grid-template-columns: 1fr;-->
<!--            }-->

<!--            .action-buttons {-->
<!--                flex-direction: column;-->
<!--            }-->

<!--            .pupils-header {-->
<!--                flex-direction: column;-->
<!--                align-items: stretch;-->
<!--            }-->

<!--            .pupils-table {-->
<!--                font-size: 14px;-->
<!--            }-->

<!--            .pupils-table th,-->
<!--            .pupils-table td {-->
<!--                padding: 10px 5px;-->
<!--            }-->

<!--            .modal-content {-->
<!--                margin: 10% auto;-->
<!--                width: 95%;-->
<!--                padding: 20px;-->
<!--            }-->

<!--            .form-grid {-->
<!--                grid-template-columns: 1fr;-->
<!--            }-->
<!--        }-->

<!--        @media (max-width: 480px) {-->
<!--            .login-card {-->
<!--                padding: 30px 20px;-->
<!--                margin: 20px;-->
<!--            }-->

<!--            .school-logo h1 {-->
<!--                font-size: 2em;-->
<!--            }-->

<!--            .pupils-table {-->
<!--                display: block;-->
<!--                overflow-x: auto;-->
<!--                white-space: nowrap;-->
<!--            }-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--&lt;!&ndash; Login Section &ndash;&gt;-->
<!--<div id="loginSection" class="login-container">-->
<!--    <div class="login-card">-->
<!--        <div class="school-logo">-->
<!--            <h1>Jezvid</h1>-->
<!--            <p>Nur and Primary School</p>-->
<!--        </div>-->
<!--        <form id="loginForm">-->
<!--            <div class="form-group">-->
<!--                <label for="email">Email Address</label>-->
<!--                <input type="email" id="email" value="tblesslegalstore@gmail.com" required>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="password">Password</label>-->
<!--                <input type="password" id="password" value="supadmin" required>-->
<!--            </div>-->
<!--            <button type="submit" class="btn" id="loginBtn">-->
<!--                <span class="btn-text">Login</span>-->
<!--                <span class="loading" style="display: none;"></span>-->
<!--            </button>-->
<!--        </form>-->
<!--        <div id="loginAlert" style="display: none;"></div>-->
<!--    </div>-->
<!--</div>-->

<!--&lt;!&ndash; Dashboard Section &ndash;&gt;-->
<!--<div id="dashboardSection" class="dashboard">-->
<!--    <header class="header">-->
<!--        <div class="header-content">-->
<!--            <h1>School Management Dashboard</h1>-->
<!--            <div class="header-actions">-->
<!--                <span id="currentUser">Admin User</span>-->
<!--                <button class="logout-btn" onclick="logout()">Logout</button>-->
<!--            </div>-->
<!--        </div>-->
<!--    </header>-->

<!--    <div class="container">-->
<!--        &lt;!&ndash; Statistics Cards &ndash;&gt;-->
<!--        <div class="stats-grid">-->
<!--            <div class="stat-card total">-->
<!--                <div class="stat-value" id="totalPupils">0</div>-->
<!--                <div class="stat-label">Total Pupils</div>-->
<!--            </div>-->
<!--            <div class="stat-card management">-->
<!--                <div class="stat-value" id="managementCount">0</div>-->
<!--                <div class="stat-label">Management</div>-->
<!--            </div>-->
<!--            <div class="stat-card paid">-->
<!--                <div class="stat-value" id="totalPaid">â‚¦0</div>-->
<!--                <div class="stat-label">Total Paid</div>-->
<!--            </div>-->
<!--            <div class="stat-card outstanding">-->
<!--                <div class="stat-value" id="totalOutstanding">â‚¦0</div>-->
<!--                <div class="stat-label">Outstanding</div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; Controls Section &ndash;&gt;-->
<!--        <div class="controls-section">-->
<!--            <div class="controls-grid">-->
<!--                <div class="control-group">-->
<!--                    <label for="sessionSelect">Session</label>-->
<!--                    <select id="sessionSelect">-->
<!--                        <option value="2024/2025">2024/2025</option>-->
<!--                        <option value="2025/2026">2025/2026</option>-->
<!--                    </select>-->
<!--                </div>-->
<!--                <div class="control-group">-->
<!--                    <label for="termSelect">Term</label>-->
<!--                    <select id="termSelect">-->
<!--                        <option value="1st Term">1st Term</option>-->
<!--                        <option value="2nd Term">2nd Term</option>-->
<!--                        <option value="3rd Term">3rd Term</option>-->
<!--                    </select>-->
<!--                </div>-->
<!--                <div class="control-group">-->
<!--                    <label for="classSelect">Class</label>-->
<!--                    <select id="classSelect">-->
<!--                        <option value="">All Classes</option>-->
<!--                        <option value="Reception">Reception</option>-->
<!--                        <option value="KG 1">KG 1</option>-->
<!--                        <option value="KG 2">KG 2</option>-->
<!--                        <option value="Nursery 1">Nursery 1</option>-->
<!--                        <option value="Nursery 2">Nursery 2</option>-->
<!--                        <option value="Basic 1">Basic 1</option>-->
<!--                        <option value="Basic 2">Basic 2</option>-->
<!--                        <option value="Basic 3">Basic 3</option>-->
<!--                        <option value="Basic 4">Basic 4</option>-->
<!--                        <option value="Basic 5">Basic 5</option>-->
<!--                    </select>-->
<!--                </div>-->
<!--                <div class="control-group">-->
<!--                    <label for="pageSize">Page Size</label>-->
<!--                    <select id="pageSize">-->
<!--                        <option value="10">10</option>-->
<!--                        <option value="20">20</option>-->
<!--                        <option value="50">50</option>-->
<!--                    </select>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="action-buttons">-->
<!--                <button class="btn btn-secondary" onclick="loadPupils()">Search</button>-->
<!--                <button class="btn btn-success" onclick="openAddPupilModal()">Add Pupil</button>-->
<!--                <button class="btn btn-warning" onclick="openFeeSettingsModal()">Fee Settings</button>-->
<!--                <button class="btn btn-info" onclick="openPromoteModal()">Promote All</button>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; Pupils Section &ndash;&gt;-->
<!--        <div class="pupils-section">-->
<!--            <div class="pupils-header">-->
<!--                <h2>Pupils List</h2>-->
<!--                <div class="search-box">-->
<!--                    <input type="text" id="nameFilter" placeholder="Search by name..." onkeyup="filterPupilsByName()">-->
<!--                </div>-->
<!--            </div>-->
<!--            <div id="pupilsAlert" style="display: none;"></div>-->
<!--            <div style="overflow-x: auto;">-->
<!--                <table class="pupils-table">-->
<!--                    <thead>-->
<!--                    <tr>-->
<!--                        <th>Name</th>-->
<!--                        <th>Class</th>-->
<!--                        <th>Status</th>-->
<!--                        <th>Fee</th>-->
<!--                        <th>Paid</th>-->
<!--                        <th>Outstanding</th>-->
<!--                        <th>Actions</th>-->
<!--                    </tr>-->
<!--                    </thead>-->
<!--                    <tbody id="pupilsTableBody">-->
<!--                    <tr>-->
<!--                        <td colspan="7" style="text-align: center; padding: 40px;">-->
<!--                            <div class="loading"></div>-->
<!--                            <p>Loading pupils...</p>-->
<!--                        </td>-->
<!--                    </tr>-->
<!--                    </tbody>-->
<!--                </table>-->
<!--            </div>-->
<!--            <div class="pagination" id="pagination"></div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--&lt;!&ndash; Add/Edit Pupil Modal &ndash;&gt;-->
<!--<div id="pupilModal" class="modal">-->
<!--    <div class="modal-content">-->
<!--        <div class="modal-header">-->
<!--            <h2 id="pupilModalTitle">Add New Pupil</h2>-->
<!--            <span class="close" onclick="closePupilModal()">&times;</span>-->
<!--        </div>-->
<!--        <form id="pupilForm">-->
<!--            <div class="form-grid">-->
<!--                <div class="form-group">-->
<!--                    <label for="pupilName">Name</label>-->
<!--                    <input type="text" id="pupilName" required>-->
<!--                </div>-->
<!--                <div class="form-group">-->
<!--                    <label for="pupilClass">Class</label>-->
<!--                    <select id="pupilClass" required>-->
<!--                        <option value="">Select Class</option>-->
<!--                        <option value="Reception">Reception</option>-->
<!--                        <option value="KG 1">KG 1</option>-->
<!--                        <option value="KG 2">KG 2</option>-->
<!--                        <option value="Nursery 1">Nursery 1</option>-->
<!--                        <option value="Nursery 2">Nursery 2</option>-->
<!--                        <option value="Basic 1">Basic 1</option>-->
<!--                        <option value="Basic 2">Basic 2</option>-->
<!--                        <option value="Basic 3">Basic 3</option>-->
<!--                        <option value="Basic 4">Basic 4</option>-->
<!--                        <option value="Basic 5">Basic 5</option>-->
<!--                    </select>-->
<!--                </div>-->
<!--                <div class="form-group">-->
<!--                    <label for="pupilGender">Gender</label>-->
<!--                    <select id="pupilGender" required>-->
<!--                        <option value="">Select Gender</option>-->
<!--                        <option value="Male">Male</option>-->
<!--                        <option value="Female">Female</option>-->
<!--                    </select>-->
<!--                </div>-->
<!--                <div class="form-group">-->
<!--                    <label for="customFee">Custom Fee (â‚¦)</label>-->
<!--                    <input type="number" id="customFee" placeholder="Leave empty for default fee">-->
<!--                </div>-->
<!--                <div class="form-group">-->
<!--                    <label for="phoneNumber">Phone Number</label>-->
<!--                    <input type="tel" id="phoneNumber" placeholder="+234...">-->
<!--                </div>-->
<!--                <div class="form-group">-->
<!--                    <label for="dateOfBirth">Date of Birth</label>-->
<!--                    <input type="date" id="dateOfBirth">-->
<!--                </div>-->
<!--            </div>-->
<!--            <div style="margin: 20px 0;">-->
<!--                <label>-->
<!--                    <input type="checkbox" id="isManagement"> Management (No fees)-->
<!--                </label>-->
<!--            </div>-->
<!--            <div id="editOnlyFields" style="display: none;">-->
<!--                <div style="margin: 20px 0;">-->
<!--                    <label style="display: flex; align-items: center; gap: 10px;">-->
<!--                        Active Status:-->
<!--                        <div class="toggle-switch">-->
<!--                            <input type="checkbox" id="isActive">-->
<!--                            <span class="slider"></span>-->
<!--                        </div>-->
<!--                    </label>-->
<!--                </div>-->
<!--                <div style="margin: 20px 0;">-->
<!--                    <label>-->
<!--                        <input type="checkbox" id="eligibleForPromotion"> Eligible for Promotion-->
<!--                    </label>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div style="display: flex; gap: 15px; justify-content: flex-end; margin-top: 30px;">-->
<!--                <button type="button" class="btn btn-secondary" onclick="closePupilModal()">Cancel</button>-->
<!--                <button type="submit" class="btn" id="savePupilBtn">Save Pupil</button>-->
<!--            </div>-->
<!--        </form>-->
<!--        <div id="pupilModalAlert" style="display: none;"></div>-->
<!--    </div>-->
<!--</div>-->

<!--&lt;!&ndash; Payment Modal &ndash;&gt;-->
<!--<div id="paymentModal" class="modal">-->
<!--    <div class="modal-content">-->
<!--        <div class="modal-header">-->
<!--            <h2>Make Payment</h2>-->
<!--            <span class="close" onclick="closePaymentModal()">&times;</span>-->
<!--        </div>-->
<!--        <div id="paymentPupilInfo" style="margin-bottom: 20px;"></div>-->
<!--        <form id="paymentForm">-->
<!--            <div class="form-group">-->
<!--                <label for="paymentAmount">Payment Amount (â‚¦)</label>-->
<!--                <input type="number" id="paymentAmount" required min="1" step="0.01">-->
<!--            </div>-->
<!--            <div style="display: flex; gap: 15px; justify-content: flex-end; margin-top: 30px;">-->
<!--                <button type="button" class="btn btn-secondary" onclick="closePaymentModal()">Cancel</button>-->
<!--                <button type="submit" class="btn">Process Payment</button>-->
<!--            </div>-->
<!--        </form>-->
<!--        <div id="paymentModalAlert" style="display: none;"></div>-->
<!--    </div>-->
<!--</div>-->

<!--&lt;!&ndash; Fee Settings Modal &ndash;&gt;-->
<!--<div id="feeSettingsModal" class="modal">-->
<!--    <div class="modal-content">-->
<!--        <div class="modal-header">-->
<!--            <h2>Fee Settings</h2>-->
<!--            <span class="close" onclick="closeFeeSettingsModal()">&times;</span>-->
<!--        </div>-->
<!--        <form id="feeSettingsForm">-->
<!--            <div class="form-grid">-->
<!--                <div class="form-group">-->
<!--                    <label for="feeSession">Session</label>-->
<!--                    <select id="feeSession" required>-->
<!--                        <option value="2024/2025">2024/2025</option>-->
<!--                        <option value="2025/2026">2025/2026</option>-->
<!--                    </select>-->
<!--                </div>-->
<!--                <div class="form-group">-->
<!--                    <label for="nurseryFee">Nursery Fee (â‚¦)</label>-->
<!--                    <input type="number" id="nurseryFee" required min="0" step="0.01">-->
<!--                </div>-->
<!--                <div class="form-group">-->
<!--                    <label for="basicFee">Basic Fee (â‚¦)</label>-->
<!--                    <input type="number" id="basicFee" required min="0" step="0.01">-->
<!--                </div>-->
<!--            </div>-->
<!--            <div style="display: flex; gap: 15px; justify-content: flex-end; margin-top: 30px;">-->
<!--                <button type="button" class="btn btn-secondary" onclick="closeFeeSettingsModal()">Cancel</button>-->
<!--                <button type="submit" class="btn">Update Fee Settings</button>-->
<!--            </div>-->
<!--        </form>-->
<!--        <div id="feeSettingsModalAlert" style="display: none;"></div>-->
<!--    </div>-->
<!--</div>-->

<!--&lt;!&ndash; Promote Modal &ndash;&gt;-->
<!--<div id="promoteModal" class="modal">-->
<!--    <div class="modal-content">-->
<!--        <div class="modal-header">-->
<!--            <h2>Promote All Pupils</h2>-->
<!--            <span class="close" onclick="closePromoteModal()">&times;</span>-->
<!--        </div>-->
<!--        <form id="promoteForm">-->
<!--            <div class="form-grid">-->
<!--                <div class="form-group">-->
<!--                    <label for="currentSessionPromote">Current Session</label>-->
<!--                    <select id="currentSessionPromote" required>-->
<!--                        <option value="2024/2025">2024/2025</option>-->
<!--                        <option value="2025/2026">2025/2026</option>-->
<!--                    </select>-->
<!--                </div>-->
<!--                <div class="form-group">-->
<!--                    <label for="newSessionPromote">New Session</label>-->
<!--                    <select id="newSessionPromote" required>-->
<!--                        <option value="2025/2026">2025/2026</option>-->
<!--                        <option value="2026/2027">2026/2027</option>-->
<!--                    </select>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="alert alert-warning" style="margin: 20px 0;">-->
<!--                <strong>Warning:</strong> This will promote ALL pupils from the current session to the new session. This action cannot be undone.-->
<!--            </div>-->
<!--            <div style="display: flex; gap: 15px; justify-content: flex-end; margin-top: 30px;">-->
<!--                <button type="button" class="btn btn-secondary" onclick="closePromoteModal()">Cancel</button>-->
<!--                <button type="submit" class="btn">Promote All Pupils</button>-->
<!--            </div>-->
<!--        </form>-->
<!--        <div id="promoteModalAlert" style="display: none;"></div>-->
<!--    </div>-->
<!--</div>-->

<!--<script>-->
<!--    const API_BASE_URL = 'http://localhost:8800/jezvid/v1/api';-->
<!--    let authToken = '';-->
<!--    let currentPage = 0;-->
<!--    let allPupils = [];-->
<!--    let filteredPupils = [];-->
<!--    let currentEditingPupilId = null;-->
<!--    let currentPaymentPupilId = null;-->

<!--    // Authentication functions-->
<!--    async function login(email, password) {-->
<!--        try {-->
<!--            const response = await fetch(`${API_BASE_URL}/authentication/admin`, {-->
<!--                method: 'POST',-->
<!--                headers: {-->
<!--                    'Content-Type': 'application/json'-->
<!--                },-->
<!--                body: JSON.stringify({-->
<!--                    emailAddress: email,-->
<!--                    password: password-->
<!--                })-->
<!--            });-->

<!--            if (response.ok) {-->
<!--                const data = await response.json();-->
<!--                authToken = data.token || 'eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3NTM5Nzg2MzEsImV4cCI6MTc1Mzk4NTgzMSwiaWQiOiJ0Ymxlc3NsZWdhbHN0b3JlQGdtYWlsLmNvbSIsInJvbGUiOiJTQUQifQ.9yE7eFsH6qvyLjvwAmHFxOIetDTK7by1YhUbjNwAc8OwnMeMX7l7x2eAAkgfwKT4MbR7UZmsvVptOFAmxjL8dw';-->
<!--                localStorage.setItem('authToken', authToken);-->
<!--                showDashboard();-->
<!--                await loadInitialData();-->
<!--                return true;-->
<!--            } else {-->
<!--                throw new Error('Login failed');-->
<!--            }-->
<!--        } catch (error) {-->
<!--            console.error('Login error:', error);-->
<!--            // Use fallback token for testing-->
<!--            authToken = 'eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3NTM5Nzg2MzEsImV4cCI6MTc1Mzk4NTgzMSwiaWQiOiJ0Ymxlc3NsZWdhbHN0b3JlQGdtYWlsLmNvbSIsInJvbGUiOiJTQUQifQ.9yE7eFsH6qvyLjvwAmHFxOIetDTK7by1YhUbjNwAc8OwnMeMX7l7x2eAAkgfwKT4MbR7UZmsvVptOFAmxjL8dw';-->
<!--            localStorage.setItem('authToken', authToken);-->
<!--            showDashboard();-->
<!--            await loadInitialData();-->
<!--            return true;-->
<!--        }-->
<!--    }-->

<!--    function logout() {-->
<!--        authToken = '';-->
<!--        localStorage.removeItem('authToken');-->
<!--        document.getElementById('loginSection').style.display = 'flex';-->
<!--        document.getElementById('dashboardSection').style.display = 'none';-->
<!--    }-->

<!--    function showDashboard() {-->
<!--        document.getElementById('loginSection').style.display = 'none';-->
<!--        document.getElementById('dashboardSection').style.display = 'block';-->
<!--    }-->

<!--    // API functions-->
<!--    async function apiCall(endpoint, options = {}) {-->
<!--        const defaultOptions = {-->
<!--            headers: {-->
<!--                'Content-Type': 'application/json',-->
<!--                'Authorization': `Bearer ${authToken}`-->
<!--            }-->
<!--        };-->

<!--        const mergedOptions = {-->
<!--            ...defaultOptions,-->
<!--            ...options,-->
<!--            headers: {-->
<!--                ...defaultOptions.headers,-->
<!--                ...options.headers-->
<!--            }-->
<!--        };-->

<!--        try {-->
<!--            const response = await fetch(`${API_BASE_URL}${endpoint}`, mergedOptions);-->
<!--            const data = await response.json();-->

<!--            if (!response.ok) {-->
<!--                throw new Error(data.message || 'API request failed');-->
<!--            }-->

<!--            return data;-->
<!--        } catch (error) {-->
<!--            console.error('API Error:', error);-->
<!--            throw error;-->
<!--        }-->
<!--    }-->

<!--    // Load initial data-->
<!--    async function loadInitialData() {-->
<!--        await Promise.all([-->
<!--            loadSummary(),-->
<!--            loadPupils(),-->
<!--            loadFeeSettings()-->
<!--        ]);-->
<!--    }-->

<!--    // Summary functions-->
<!--    async function loadSummary() {-->
<!--        try {-->
<!--            const session = document.getElementById('sessionSelect').value;-->
<!--            const term = document.getElementById('termSelect').value;-->
<!--            const pageSize = document.getElementById('pageSize').value;-->

<!--            const summary = await apiCall(`/pupils/summary?session=${encodeURIComponent(session)}&term=${encodeURIComponent(term)}&page=0&pageSize=${pageSize}`);-->

<!--            document.getElementById('totalPupils').textContent = summary.totalPupils || 0;-->
<!--            document.getElementById('managementCount').textContent = summary.managementCount || 0;-->
<!--            document.getElementById('totalPaid').textContent = `â‚¦${(summary.totalPaid || 0).toLocaleString()}`;-->
<!--            document.getElementById('totalOutstanding').textContent = `â‚¦${(summary.totalOutstanding || 0).toLocaleString()}`;-->
<!--        } catch (error) {-->
<!--            console.error('Error loading summary:', error);-->
<!--            showAlert('pupilsAlert', 'Error loading summary data', 'error');-->
<!--        }-->
<!--    }-->

<!--    // Pupils functions-->
<!--    async function loadPupils() {-->
<!--        try {-->
<!--            showLoading('pupilsTableBody');-->

<!--            const session = document.getElementById('sessionSelect').value;-->
<!--            const term = document.getElementById('termSelect').value;-->
<!--            const pupilClass = document.getElementById('classSelect').value;-->
<!--            const pageSize = document.getElementById('pageSize').value;-->

<!--            let endpoint = `/pupils/search?session=${encodeURIComponent(session)}&term=${encodeURIComponent(term)}&page=${currentPage}&pageSize=${pageSize}`;-->

<!--            if (pupilClass) {-->
<!--                endpoint += `&pupilClass=${encodeURIComponent(pupilClass)}`;-->
<!--            }-->

<!--            const data = await apiCall(endpoint);-->
<!--            allPupils = data.pupils || [];-->
<!--            filteredPupils = [...allPupils];-->

<!--            displayPupils();-->
<!--            setupPagination(data.totalPages || 1);-->
<!--            await loadSummary();-->
<!--        } catch (error) {-->
<!--            console.error('Error loading pupils:', error);-->
<!--            showAlert('pupilsAlert', 'Error loading pupils data. Please try again.', 'error');-->
<!--            document.getElementById('pupilsTableBody').innerHTML = '<tr><td colspan="7" style="text-align: center; padding: 40px;">No pupils found</td></tr>';-->
<!--        }-->
<!--    }-->

<!--    function displayPupils() {-->
<!--        const tbody = document.getElementById('pupilsTableBody');-->

<!--        if (filteredPupils.length === 0) {-->
<!--            tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; padding: 40px;">No pupils found</td></tr>';-->
<!--            return;-->
<!--        }-->

<!--        tbody.innerHTML = filteredPupils.map(pupil => {-->
<!--            const currentSession = document.getElementById('sessionSelect').value;-->
<!--            const currentTerm = document.getElementById('termSelect').value;-->

<!--            const termData = pupil.payments?.[currentSession]?.[currentTerm] || { paid: 0, fee: 0 };-->
<!--            const outstanding = Math.max(0, termData.fee - termData.paid);-->

<!--            let statusBadge = '';-->
<!--            if (pupil.management) {-->
<!--                statusBadge = '<span class="status-badge status-management">Management</span>';-->
<!--            } else if (pupil.isActive === true) {-->
<!--                statusBadge = '<span class="status-badge status-active">Active</span>';-->
<!--            } else if (pupil.isActive === false) {-->
<!--                statusBadge = '<span class="status-badge status-inactive">Inactive</span>';-->
<!--            } else {-->
<!--                statusBadge = '<span class="status-badge status-active">Active</span>';-->
<!--            }-->

<!--            return `-->
<!--                    <tr>-->
<!--                        <td><strong>${pupil.name}</strong></td>-->
<!--                        <td>${pupil.pupilClass}</td>-->
<!--                        <td>${statusBadge}</td>-->
<!--                        <td>â‚¦${termData.fee.toLocaleString()}</td>-->
<!--                        <td>â‚¦${termData.paid.toLocaleString()}</td>-->
<!--                        <td>â‚¦${outstanding.toLocaleString()}</td>-->
<!--                        <td>-->
<!--                            <button class="action-btn btn-view" onclick="viewPupil('${pupil.id}')">View</button>-->
<!--                            <button class="action-btn btn-edit" onclick="editPupil('${pupil.id}')">Edit</button>-->
<!--                            ${!pupil.management ? `<button class="action-btn btn-pay" onclick="openPaymentModal('${pupil.id}')">Pay</button>` : ''}-->
<!--                        </td>-->
<!--                    </tr>-->
<!--                `;-->
<!--        }).join('');-->
<!--    }-->

<!--    function filterPupilsByName() {-->
<!--        const filter = document.getElementById('nameFilter').value.toLowerCase();-->
<!--        filteredPupils = allPupils.filter(pupil =>-->
<!--            pupil.name.toLowerCase().includes(filter)-->
<!--        );-->
<!--        displayPupils();-->
<!--    }-->

<!--    function setupPagination(totalPages) {-->
<!--        const pagination = document.getElementById('pagination');-->
<!--        let paginationHTML = '';-->

<!--        // Previous button-->
<!--        if (currentPage > 0) {-->
<!--            paginationHTML += `<button onclick="changePage(${currentPage - 1})">Previous</button>`;-->
<!--        }-->

<!--        // Page numbers-->
<!--        for (let i = 0; i < totalPages; i++) {-->
<!--            const activeClass = i === currentPage ? 'active' : '';-->
<!--            paginationHTML += `<button class="${activeClass}" onclick="changePage(${i})">${i + 1}</button>`;-->
<!--        }-->

<!--        // Next button-->
<!--        if (currentPage < totalPages - 1) {-->
<!--            paginationHTML += `<button onclick="changePage(${currentPage + 1})">Next</button>`;-->
<!--        }-->

<!--        pagination.innerHTML = paginationHTML;-->
<!--    }-->

<!--    function changePage(page) {-->
<!--        currentPage = page;-->
<!--        loadPupils();-->
<!--    }-->

<!--    // Pupil CRUD functions-->
<!--    async function viewPupil(pupilId) {-->
<!--        try {-->
<!--            const pupil = await apiCall(`/pupils/${pupilId}`);-->

<!--            let pupilInfo = `-->
<!--                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">-->
<!--                        <h3>${pupil.name}</h3>-->
<!--                        <p><strong>Class:</strong> ${pupil.pupilClass}</p>-->
<!--                        <p><strong>Session:</strong> ${pupil.session}</p>-->
<!--                        <p><strong>Status:</strong> ${pupil.management ? 'Management' : (pupil.isActive ? 'Active' : 'Inactive')}</p>-->
<!--                        <p><strong>Joined Date:</strong> ${new Date(pupil.joinedDate).toLocaleDateString()}</p>-->
<!--                        ${pupil.customFee ? `<p><strong>Custom Fee:</strong> â‚¦${pupil.customFee.toLocaleString()}</p>` : ''}-->
<!--                        <p><strong>Eligible for Promotion:</strong> ${pupil.eligibleForPromotion ? 'Yes' : 'No'}</p>-->
<!--                    </div>-->
<!--                `;-->

<!--            if (pupil.payments) {-->
<!--                pupilInfo += '<h4>Payment History</h4>';-->
<!--                Object.keys(pupil.payments).forEach(session => {-->
<!--                    pupilInfo += `<h5>${session}</h5>`;-->
<!--                    Object.keys(pupil.payments[session]).forEach(term => {-->
<!--                        const termData = pupil.payments[session][term];-->
<!--                        const outstanding = Math.max(0, termData.fee - termData.paid);-->
<!--                        pupilInfo += `-->
<!--                                <div style="margin: 10px 0; padding: 15px; background: white; border-radius: 8px; border-left: 4px solid #667eea;">-->
<!--                                    <strong>${term}</strong><br>-->
<!--                                    Fee: â‚¦${termData.fee.toLocaleString()}<br>-->
<!--                                    Paid: â‚¦${termData.paid.toLocaleString()}<br>-->
<!--                                    Outstanding: â‚¦${outstanding.toLocaleString()}<br>-->
<!--                                    ${termData.lastPaymentDate ? `Last Payment: ${new Date(termData.lastPaymentDate).toLocaleDateString()}` : 'No payments yet'}-->
<!--                                </div>-->
<!--                            `;-->
<!--                    });-->
<!--                });-->
<!--            }-->

<!--            document.getElementById('pupilModalTitle').textContent = 'Pupil Details';-->
<!--            document.getElementById('pupilForm').style.display = 'none';-->
<!--            document.getElementById('pupilModal').querySelector('.modal-content').innerHTML = `-->
<!--                    <div class="modal-header">-->
<!--                        <h2>Pupil Details</h2>-->
<!--                        <span class="close" onclick="closePupilModal()">&times;</span>-->
<!--                    </div>-->
<!--                    ${pupilInfo}-->
<!--                    <div style="display: flex; gap: 15px; justify-content: flex-end; margin-top: 30px;">-->
<!--                        <button class="btn btn-secondary" onclick="closePupilModal()">Close</button>-->
<!--                        <button class="btn" onclick="editPupil('${pupil.id}')">Edit Pupil</button>-->
<!--                    </div>-->
<!--                `;-->

<!--            document.getElementById('pupilModal').style.display = 'block';-->
<!--        } catch (error) {-->
<!--            console.error('Error viewing pupil:', error);-->
<!--            showAlert('pupilsAlert', 'Error loading pupil details', 'error');-->
<!--        }-->
<!--    }-->

<!--    function openAddPupilModal() {-->
<!--        resetPupilForm();-->
<!--        document.getElementById('pupilModalTitle').textContent = 'Add New Pupil';-->
<!--        document.getElementById('editOnlyFields').style.display = 'none';-->
<!--        currentEditingPupilId = null;-->
<!--        document.getElementById('pupilModal').style.display = 'block';-->
<!--    }-->

<!--    async function editPupil(pupilId) {-->
<!--        try {-->
<!--            const pupil = await apiCall(`/pupils/${pupilId}`);-->

<!--            resetPupilForm();-->
<!--            document.getElementById('pupilModalTitle').textContent = 'Edit Pupil';-->
<!--            document.getElementById('editOnlyFields').style.display = 'block';-->
<!--            currentEditingPupilId = pupilId;-->

<!--            // Populate form-->
<!--            document.getElementById('pupilName').value = pupil.name || '';-->
<!--            document.getElementById('pupilClass').value = pupil.pupilClass || '';-->
<!--            document.getElementById('pupilGender').value = pupil.gender || '';-->
<!--            document.getElementById('customFee').value = pupil.customFee || '';-->
<!--            document.getElementById('phoneNumber').value = pupil.phoneNumber || '';-->
<!--            document.getElementById('dateOfBirth').value = pupil.dateOfBirth ? pupil.dateOfBirth.split('T')[0] : '';-->
<!--            document.getElementById('isManagement').checked = pupil.management || false;-->
<!--            document.getElementById('isActive').checked = pupil.isActive !== false; // Default to true if null-->
<!--            document.getElementById('eligibleForPromotion').checked = pupil.eligibleForPromotion || false;-->

<!--            document.getElementById('pupilModal').style.display = 'block';-->
<!--        } catch (error) {-->
<!--            console.error('Error loading pupil for edit:', error);-->
<!--            showAlert('pupilsAlert', 'Error loading pupil data', 'error');-->
<!--        }-->
<!--    }-->

<!--    function resetPupilForm() {-->
<!--        // Reset modal content to original form-->
<!--        document.getElementById('pupilModal').querySelector('.modal-content').innerHTML = document.getElementById('pupilModal').querySelector('.modal-content').innerHTML.includes('<form') ? document.getElementById('pupilModal').querySelector('.modal-content').innerHTML : `-->
<!--                <div class="modal-header">-->
<!--                    <h2 id="pupilModalTitle">Add New Pupil</h2>-->
<!--                    <span class="close" onclick="closePupilModal()">&times;</span>-->
<!--                </div>-->
<!--                <form id="pupilForm">-->
<!--                    <div class="form-grid">-->
<!--                        <div class="form-group">-->
<!--                            <label for="pupilName">Name</label>-->
<!--                            <input type="text" id="pupilName" required>-->
<!--                        </div>-->
<!--                        <div class="form-group">-->
<!--                            <label for="pupilClass">Class</label>-->
<!--                            <select id="pupilClass" required>-->
<!--                                <option value="">Select Class</option>-->
<!--                                <option value="Reception">Reception</option>-->
<!--                                <option value="KG 1">KG 1</option>-->
<!--                                <option value="KG 2">KG 2</option>-->
<!--                                <option value="Nursery 1">Nursery 1</option>-->
<!--                                <option value="Nursery 2">Nursery 2</option>-->
<!--                                <option value="Basic 1">Basic 1</option>-->
<!--                                <option value="Basic 2">Basic 2</option>-->
<!--                                <option value="Basic 3">Basic 3</option>-->
<!--                                <option value="Basic 4">Basic 4</option>-->
<!--                                <option value="Basic 5">Basic 5</option>-->
<!--                            </select>-->
<!--                        </div>-->
<!--                        <div class="form-group">-->
<!--                            <label for="pupilGender">Gender</label>-->
<!--                            <select id="pupilGender" required>-->
<!--                                <option value="">Select Gender</option>-->
<!--                                <option value="Male">Male</option>-->
<!--                                <option value="Female">Female</option>-->
<!--                            </select>-->
<!--                        </div>-->
<!--                        <div class="form-group">-->
<!--                            <label for="customFee">Custom Fee (â‚¦)</label>-->
<!--                            <input type="number" id="customFee" placeholder="Leave empty for default fee">-->
<!--                        </div>-->
<!--                        <div class="form-group">-->
<!--                            <label for="phoneNumber">Phone Number</label>-->
<!--                            <input type="tel" id="phoneNumber" placeholder="+234...">-->
<!--                        </div>-->
<!--                        <div class="form-group">-->
<!--                            <label for="dateOfBirth">Date of Birth</label>-->
<!--                            <input type="date" id="dateOfBirth">-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div style="margin: 20px 0;">-->
<!--                        <label>-->
<!--                            <input type="checkbox" id="isManagement"> Management (No fees)-->
<!--                        </label>-->
<!--                    </div>-->
<!--                    <div id="editOnlyFields" style="display: none;">-->
<!--                        <div style="margin: 20px 0;">-->
<!--                            <label style="display: flex; align-items: center; gap: 10px;">-->
<!--                                Active Status:-->
<!--                                <div class="toggle-switch">-->
<!--                                    <input type="checkbox" id="isActive">-->
<!--                                    <span class="slider"></span>-->
<!--                                </div>-->
<!--                            </label>-->
<!--                        </div>-->
<!--                        <div style="margin: 20px 0;">-->
<!--                            <label>-->
<!--                                <input type="checkbox" id="eligibleForPromotion"> Eligible for Promotion-->
<!--                            </label>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div style="display: flex; gap: 15px; justify-content: flex-end; margin-top: 30px;">-->
<!--                        <button type="button" class="btn btn-secondary" onclick="closePupilModal()">Cancel</button>-->
<!--                        <button type="submit" class="btn" id="savePupilBtn">Save Pupil</button>-->
<!--                    </div>-->
<!--                </form>-->
<!--                <div id="pupilModalAlert" style="display: none;"></div>-->
<!--            `;-->

<!--        document.getElementById('pupilForm').reset();-->
<!--        hideAlert('pupilModalAlert');-->

<!--        // Re-attach event listener-->
<!--        document.getElementById('pupilForm').onsubmit = handlePupilSubmit;-->
<!--    }-->

<!--    function closePupilModal() {-->
<!--        document.getElementById('pupilModal').style.display = 'none';-->
<!--        currentEditingPupilId = null;-->
<!--    }-->

<!--    async function handlePupilSubmit(e) {-->
<!--        e.preventDefault();-->

<!--        const pupilData = {-->
<!--            name: document.getElementById('pupilName').value,-->
<!--            pupilClass: document.getElementById('pupilClass').value,-->
<!--            gender: document.getElementById('pupilGender').value,-->
<!--            management: document.getElementById('isManagement').checked,-->
<!--            customFee: document.getElementById('customFee').value ? parseFloat(document.getElementById('customFee').value) : null,-->
<!--            phoneNumber: document.getElementById('phoneNumber').value || undefined,-->
<!--            dateOfBirth: document.getElementById('dateOfBirth').value || undefined-->
<!--        };-->

<!--        if (currentEditingPupilId) {-->
<!--            pupilData.isActive = document.getElementById('isActive').checked;-->
<!--            pupilData.eligibleForPromotion = document.getElementById('eligibleForPromotion').checked;-->
<!--        }-->

<!--        try {-->
<!--            if (currentEditingPupilId) {-->
<!--                await apiCall(`/pupils/update/${currentEditingPupilId}`, {-->
<!--                    method: 'PUT',-->
<!--                    body: JSON.stringify(pupilData)-->
<!--                });-->
<!--                showAlert('pupilModalAlert', 'Pupil updated successfully!', 'success');-->
<!--            } else {-->
<!--                const session = document.getElementById('sessionSelect').value;-->
<!--                const term = document.getElementById('termSelect').value;-->
<!--                await apiCall(`/pupils/create?session=${encodeURIComponent(session)}&term=${encodeURIComponent(term)}`, {-->
<!--                    method: 'POST',-->
<!--                    body: JSON.stringify(pupilData)-->
<!--                });-->
<!--                showAlert('pupilModalAlert', 'Pupil added successfully!', 'success');-->
<!--            }-->

<!--            setTimeout(() => {-->
<!--                closePupilModal();-->
<!--                loadPupils();-->
<!--            }, 1500);-->
<!--        } catch (error) {-->
<!--            console.error('Error saving pupil:', error);-->
<!--            showAlert('pupilModalAlert', error.message || 'Error saving pupil', 'error');-->
<!--        }-->
<!--    }-->

<!--    // Payment functions-->
<!--    function openPaymentModal(pupilId) {-->
<!--        const pupil = allPupils.find(p => p.id === pupilId);-->
<!--        if (!pupil) return;-->

<!--        currentPaymentPupilId = pupilId;-->

<!--        const currentSession = document.getElementById('sessionSelect').value;-->
<!--        const currentTerm = document.getElementById('termSelect').value;-->
<!--        const termData = pupil.payments?.[currentSession]?.[currentTerm] || { paid: 0, fee: 0 };-->
<!--        const outstanding = Math.max(0, termData.fee - termData.paid);-->

<!--        document.getElementById('paymentPupilInfo').innerHTML = `-->
<!--                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">-->
<!--                    <h4>${pupil.name}</h4>-->
<!--                    <p><strong>Class:</strong> ${pupil.pupilClass}</p>-->
<!--                    <p><strong>Session:</strong> ${currentSession} - ${currentTerm}</p>-->
<!--                    <p><strong>Total Fee:</strong> â‚¦${termData.fee.toLocaleString()}</p>-->
<!--                    <p><strong>Already Paid:</strong> â‚¦${termData.paid.toLocaleString()}</p>-->
<!--                    <p><strong>Outstanding:</strong> â‚¦${outstanding.toLocaleString()}</p>-->
<!--                </div>-->
<!--            `;-->

<!--        document.getElementById('paymentAmount').value = outstanding > 0 ? outstanding : '';-->
<!--        document.getElementById('paymentModal').style.display = 'block';-->
<!--        hideAlert('paymentModalAlert');-->
<!--    }-->

<!--    function closePaymentModal() {-->
<!--        document.getElementById('paymentModal').style.display = 'none';-->
<!--        currentPaymentPupilId = null;-->
<!--    }-->

<!--    async function handlePaymentSubmit(e) {-->
<!--        e.preventDefault();-->

<!--        const amount = parseFloat(document.getElementById('paymentAmount').value);-->
<!--        const session = document.getElementById('sessionSelect').value;-->
<!--        const term = document.getElementById('termSelect').value;-->

<!--        try {-->
<!--            await apiCall(`/pupils/pay?pupilId=${currentPaymentPupilId}&amount=${amount}&session=${encodeURIComponent(session)}&term=${encodeURIComponent(term)}`, {-->
<!--                method: 'POST'-->
<!--            });-->

<!--            showAlert('paymentModalAlert', 'Payment processed successfully!', 'success');-->

<!--            setTimeout(() => {-->
<!--                closePaymentModal();-->
<!--                loadPupils();-->
<!--            }, 1500);-->
<!--        } catch (error) {-->
<!--            console.error('Error processing payment:', error);-->
<!--            showAlert('paymentModalAlert', error.message || 'Error processing payment', 'error');-->
<!--        }-->
<!--    }-->

<!--    // Fee settings functions-->
<!--    async function loadFeeSettings() {-->
<!--        try {-->
<!--            const session = document.getElementById('sessionSelect').value;-->
<!--            const fees = await apiCall(`/settings/fees-by-session?session=${encodeURIComponent(session)}`);-->

<!--            document.getElementById('feeSession').value = fees.session;-->
<!--            document.getElementById('nurseryFee').value = fees.nurseryFee;-->
<!--            document.getElementById('basicFee').value = fees.basicFee;-->
<!--        } catch (error) {-->
<!--            console.error('Error loading fee settings:', error);-->
<!--        }-->
<!--    }-->

<!--    function openFeeSettingsModal() {-->
<!--        loadFeeSettings();-->
<!--        document.getElementById('feeSettingsModal').style.display = 'block';-->
<!--        hideAlert('feeSettingsModalAlert');-->
<!--    }-->

<!--    function closeFeeSettingsModal() {-->
<!--        document.getElementById('feeSettingsModal').style.display = 'none';-->
<!--    }-->

<!--    async function handleFeeSettingsSubmit(e) {-->
<!--        e.preventDefault();-->

<!--        const session = document.getElementById('feeSession').value;-->
<!--        const nurseryFee = parseFloat(document.getElementById('nurseryFee').value);-->
<!--        const basicFee = parseFloat(document.getElementById('basicFee').value);-->
<!--        const term = document.getElementById('termSelect').value;-->

<!--        try {-->
<!--            await apiCall(`/settings/update-fees?nurseryFee=${nurseryFee}&basicFee=${basicFee}&session=${encodeURIComponent(session)}&term=${encodeURIComponent(term)}`, {-->
<!--                method: 'PUT'-->
<!--            });-->

<!--            showAlert('feeSettingsModalAlert', 'Fee settings updated successfully!', 'success');-->

<!--            setTimeout(() => {-->
<!--                closeFeeSettingsModal();-->
<!--                loadPupils();-->
<!--            }, 1500);-->
<!--        } catch (error) {-->
<!--            console.error('Error updating fee settings:', error);-->
<!--            showAlert('feeSettingsModalAlert', error.message || 'Error updating fee settings', 'error');-->
<!--        }-->
<!--    }-->

<!--    // Promotion functions-->
<!--    function openPromoteModal() {-->
<!--        const currentSession = document.getElementById('sessionSelect').value;-->
<!--        document.getElementById('currentSessionPromote').value = currentSession;-->

<!--        // Set next session as default-->
<!--        const currentYear = parseInt(currentSession.split('/')[0]);-->
<!--        const nextSession = `${currentYear + 1}/${currentYear + 2}`;-->
<!--        document.getElementById('newSessionPromote').value = nextSession;-->

<!--        document.getElementById('promoteModal').style.display = 'block';-->
<!--        hideAlert('promoteModalAlert');-->
<!--    }-->

<!--    function closePromoteModal() {-->
<!--        document.getElementById('promoteModal').style.display = 'none';-->
<!--    }-->

<!--    async function handlePromoteSubmit(e) {-->
<!--        e.preventDefault();-->

<!--        const currentSession = document.getElementById('currentSessionPromote').value;-->
<!--        const newSession = document.getElementById('newSessionPromote').value;-->

<!--        try {-->
<!--            const result = await apiCall(`/pupils/promote?currentSession=${encodeURIComponent(currentSession)}&newSession=${encodeURIComponent(newSession)}`, {-->
<!--                method: 'POST'-->
<!--            });-->

<!--            showAlert('promoteModalAlert', 'All pupils promoted successfully!', 'success');-->

<!--            setTimeout(() => {-->
<!--                closePromoteModal();-->
<!--                loadPupils();-->
<!--            }, 1500);-->
<!--        } catch (error) {-->
<!--            console.error('Error promoting pupils:', error);-->
<!--            showAlert('promoteModalAlert', error.message || 'Error promoting pupils', 'error');-->
<!--        }-->
<!--    }-->

<!--    // Utility functions-->
<!--    function showAlert(elementId, message, type) {-->
<!--        const alertElement = document.getElementById(elementId);-->
<!--        alertElement.className = `alert alert-${type}`;-->
<!--        alertElement.textContent = message;-->
<!--        alertElement.style.display = 'block';-->
<!--    }-->

<!--    function hideAlert(elementId) {-->
<!--        document.getElementById(elementId).style.display = 'none';-->
<!--    }-->

<!--    function showLoading(elementId) {-->
<!--        document.getElementById(elementId).innerHTML = `-->
<!--                <tr>-->
<!--                    <td colspan="7" style="text-align: center; padding: 40px;">-->
<!--                        <div class="loading"></div>-->
<!--                        <p>Loading...</p>-->
<!--                    </td>-->
<!--                </tr>-->
<!--            `;-->
<!--    }-->

<!--    // Event listeners-->
<!--    document.getElementById('loginForm').addEventListener('submit', async (e) => {-->
<!--        e.preventDefault();-->
<!--        const email = document.getElementById('email').value;-->
<!--        const password = document.getElementById('password').value;-->

<!--        const loginBtn = document.getElementById('loginBtn');-->
<!--        const btnText = loginBtn.querySelector('.btn-text');-->
<!--        const loading = loginBtn.querySelector('.loading');-->

<!--        btnText.style.display = 'none';-->
<!--        loading.style.display = 'inline-block';-->
<!--        loginBtn.disabled = true;-->

<!--        try {-->
<!--            await login(email, password);-->
<!--            hideAlert('loginAlert');-->
<!--        } catch (error) {-->
<!--            showAlert('loginAlert', 'Invalid credentials. Please try again.', 'error');-->
<!--        } finally {-->
<!--            btnText.style.display = 'inline';-->
<!--            loading.style.display = 'none';-->
<!--            loginBtn.disabled = false;-->
<!--        }-->
<!--    });-->

<!--    document.getElementById('pupilForm').addEventListener('submit', handlePupilSubmit);-->
<!--    document.getElementById('paymentForm').addEventListener('submit', handlePaymentSubmit);-->
<!--    document.getElementById('feeSettingsForm').addEventListener('submit', handleFeeSettingsSubmit);-->
<!--    document.getElementById('promoteForm').addEventListener('submit', handlePromoteSubmit);-->

<!--    // Filter change listeners-->
<!--    document.getElementById('sessionSelect').addEventListener('change', () => {-->
<!--        currentPage = 0;-->
<!--        loadPupils();-->
<!--    });-->

<!--    document.getElementById('termSelect').addEventListener('change', () => {-->
<!--        currentPage = 0;-->
<!--        loadPupils();-->
<!--    });-->

<!--    document.getElementById('classSelect').addEventListener('change', () => {-->
<!--        currentPage = 0;-->
<!--        loadPupils();-->
<!--    });-->

<!--    document.getElementById('pageSize').addEventListener('change', () => {-->
<!--        currentPage = 0;-->
<!--        loadPupils();-->
<!--    });-->

<!--    // Modal close handlers-->
<!--    window.onclick = function(event) {-->
<!--        const modals = ['pupilModal', 'paymentModal', 'feeSettingsModal', 'promoteModal'];-->
<!--        modals.forEach(modalId => {-->
<!--            const modal = document.getElementById(modalId);-->
<!--            if (event.target === modal) {-->
<!--                modal.style.display = 'none';-->
<!--            }-->
<!--        });-->
<!--    };-->

<!--    // Initialize app-->
<!--    document.addEventListener('DOMContentLoaded', () => {-->
<!--        // Check if user is already logged in-->
<!--        const savedToken = localStorage.getItem('authToken');-->
<!--        if (savedToken) {-->
<!--            authToken = savedToken;-->
<!--            showDashboard();-->
<!--            loadInitialData();-->
<!--        }-->
<!--    });-->

<!--    // Set current session and term as default-->
<!--    function setCurrentDefaults() {-->
<!--        const currentDate = new Date();-->
<!--        const currentYear = currentDate.getFullYear();-->
<!--        const currentMonth = currentDate.getMonth() + 1; // JavaScript months are 0-based-->

<!--        // Determine academic session (September to August)-->
<!--        let academicYear;-->
<!--        if (currentMonth >= 9) {-->
<!--            academicYear = `${currentYear}/${currentYear + 1}`;-->
<!--        } else {-->
<!--            academicYear = `${currentYear - 1}/${currentYear}`;-->
<!--        }-->

<!--        // Determine term based on month-->
<!--        let currentTerm;-->
<!--        if (currentMonth >= 9 || currentMonth <= 12) {-->
<!--            currentTerm = '1st Term';-->
<!--        } else if (currentMonth >= 1 && currentMonth <= 4) {-->
<!--            currentTerm = '2nd Term';-->
<!--        } else {-->
<!--            currentTerm = '3rd Term';-->
<!--        }-->

<!--        // Set defaults in selects-->
<!--        const sessionSelect = document.getElementById('sessionSelect');-->
<!--        const termSelect = document.getElementById('termSelect');-->

<!--        // Add current session option if it doesn't exist-->
<!--        let sessionExists = false;-->
<!--        for (let option of sessionSelect.options) {-->
<!--            if (option.value === academicYear) {-->
<!--                sessionExists = true;-->
<!--                break;-->
<!--            }-->
<!--        }-->

<!--        if (!sessionExists) {-->
<!--            const option = document.createElement('option');-->
<!--            option.value = academicYear;-->
<!--            option.textContent = academicYear;-->
<!--            sessionSelect.appendChild(option);-->
<!--        }-->

<!--        sessionSelect.value = academicYear;-->
<!--        termSelect.value = currentTerm;-->
<!--    }-->

<!--    // Call setCurrentDefaults when page loads-->
<!--    setCurrentDefaults();-->

<!--    // Helper function to format currency-->
<!--    function formatCurrency(amount) {-->
<!--        return new Intl.NumberFormat('en-NG', {-->
<!--            style: 'currency',-->
<!--            currency: 'NGN',-->
<!--            minimumFractionDigits: 0,-->
<!--            maximumFractionDigits: 0-->
<!--        }).format(amount);-->
<!--    }-->

<!--    // Enhanced error handling for API calls-->
<!--    async function handleApiError(error, fallbackMessage) {-->
<!--        console.error('API Error:', error);-->

<!--        if (error.message.includes('401') || error.message.includes('unauthorized')) {-->
<!--            // Token expired, redirect to login-->
<!--            logout();-->
<!--            return;-->
<!--        }-->

<!--        return error.message || fallbackMessage;-->
<!--    }-->

<!--    // Export functionality (optional enhancement)-->
<!--    function exportPupilsToCSV() {-->
<!--        if (filteredPupils.length === 0) {-->
<!--            alert('No pupils to export');-->
<!--            return;-->
<!--        }-->

<!--        const currentSession = document.getElementById('sessionSelect').value;-->
<!--        const currentTerm = document.getElementById('termSelect').value;-->

<!--        const csvContent = [-->
<!--            ['Name', 'Class', 'Status', 'Fee', 'Paid', 'Outstanding', 'Management', 'Active'],-->
<!--            ...filteredPupils.map(pupil => {-->
<!--                const termData = pupil.payments?.[currentSession]?.[currentTerm] || { paid: 0, fee: 0 };-->
<!--                const outstanding = Math.max(0, termData.fee - termData.paid);-->

<!--                return [-->
<!--                    pupil.name,-->
<!--                    pupil.pupilClass,-->
<!--                    pupil.management ? 'Management' : (pupil.isActive !== false ? 'Active' : 'Inactive'),-->
<!--                    termData.fee,-->
<!--                    termData.paid,-->
<!--                    outstanding,-->
<!--                    pupil.management ? 'Yes' : 'No',-->
<!--                    pupil.isActive !== false ? 'Yes' : 'No'-->
<!--                ];-->
<!--            })-->
<!--        ].map(row => row.join(',')).join('\n');-->

<!--        const blob = new Blob([csvContent], { type: 'text/csv' });-->
<!--        const url = window.URL.createObjectURL(blob);-->
<!--        const a = document.createElement('a');-->
<!--        a.href = url;-->
<!--        a.download = `pupils_${currentSession.replace('/', '-')}_${currentTerm.replace(' ', '_')}.csv`;-->
<!--        document.body.appendChild(a);-->
<!--        a.click();-->
<!--        document.body.removeChild(a);-->
<!--        window.URL.revokeObjectURL(url);-->
<!--    }-->

<!--    // Print functionality-->
<!--    function printPupilsList() {-->
<!--        const currentSession = document.getElementById('sessionSelect').value;-->
<!--        const currentTerm = document.getElementById('termSelect').value;-->
<!--        const currentClass = document.getElementById('classSelect').value || 'All Classes';-->

<!--        let printContent = `-->
<!--                <html>-->
<!--                <head>-->
<!--                    <title>Jezvid Nur and Primary School - Pupils List</title>-->
<!--                    <style>-->
<!--                        body { font-family: Arial, sans-serif; margin: 20px; }-->
<!--                        .header { text-align: center; margin-bottom: 30px; }-->
<!--                        .school-name { font-size: 24px; font-weight: bold; color: #667eea; }-->
<!--                        .report-title { font-size: 18px; margin: 10px 0; }-->
<!--                        .report-info { margin: 20px 0; }-->
<!--                        table { width: 100%; border-collapse: collapse; margin-top: 20px; }-->
<!--                        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }-->
<!--                        th { background-color: #f8f9fa; font-weight: bold; }-->
<!--                        .summary { margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 5px; }-->
<!--                        @media print {-->
<!--                            body { margin: 0; }-->
<!--                            .no-print { display: none; }-->
<!--                        }-->
<!--                    </style>-->
<!--                </head>-->
<!--                <body>-->
<!--                    <div class="header">-->
<!--                        <div class="school-name">Jezvid Nur and Primary School</div>-->
<!--                        <div class="report-title">Pupils List Report</div>-->
<!--                        <div class="report-info">-->
<!--                            Session: ${currentSession} | Term: ${currentTerm} | Class: ${currentClass}<br>-->
<!--                            Generated on: ${new Date().toLocaleDateString()}-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="summary">-->
<!--                        <strong>Summary:</strong>-->
<!--                        Total Pupils: ${document.getElementById('totalPupils').textContent} |-->
<!--                        Management: ${document.getElementById('managementCount').textContent} |-->
<!--                        Total Paid: ${document.getElementById('totalPaid').textContent} |-->
<!--                        Outstanding: ${document.getElementById('totalOutstanding').textContent}-->
<!--                    </div>-->

<!--                    <table>-->
<!--                        <thead>-->
<!--                            <tr>-->
<!--                                <th>S/N</th>-->
<!--                                <th>Name</th>-->
<!--                                <th>Class</th>-->
<!--                                <th>Status</th>-->
<!--                                <th>Fee (â‚¦)</th>-->
<!--                                <th>Paid (â‚¦)</th>-->
<!--                                <th>Outstanding (â‚¦)</th>-->
<!--                            </tr>-->
<!--                        </thead>-->
<!--                        <tbody>-->
<!--            `;-->

<!--        filteredPupils.forEach((pupil, index) => {-->
<!--            const termData = pupil.payments?.[currentSession]?.[currentTerm] || { paid: 0, fee: 0 };-->
<!--            const outstanding = Math.max(0, termData.fee - termData.paid);-->
<!--            const status = pupil.management ? 'Management' : (pupil.isActive !== false ? 'Active' : 'Inactive');-->

<!--            printContent += `-->
<!--                    <tr>-->
<!--                        <td>${index + 1}</td>-->
<!--                        <td>${pupil.name}</td>-->
<!--                        <td>${pupil.pupilClass}</td>-->
<!--                        <td>${status}</td>-->
<!--                        <td>${termData.fee.toLocaleString()}</td>-->
<!--                        <td>${termData.paid.toLocaleString()}</td>-->
<!--                        <td>${outstanding.toLocaleString()}</td>-->
<!--                    </tr>-->
<!--                `;-->
<!--        });-->

<!--        printContent += `-->
<!--                        </tbody>-->
<!--                    </table>-->
<!--                </body>-->
<!--                </html>-->
<!--            `;-->

<!--        const printWindow = window.open('', '_blank');-->
<!--        printWindow.document.write(printContent);-->
<!--        printWindow.document.close();-->
<!--        printWindow.focus();-->
<!--        printWindow.print();-->
<!--    }-->

<!--    // Add export and print buttons to the action buttons section-->
<!--    function addExportButtons() {-->
<!--        const actionButtons = document.querySelector('.action-buttons');-->

<!--        // Add export button-->
<!--        const exportBtn = document.createElement('button');-->
<!--        exportBtn.className = 'btn btn-info';-->
<!--        exportBtn.innerHTML = 'ðŸ“Š Export CSV';-->
<!--        exportBtn.onclick = exportPupilsToCSV;-->
<!--        actionButtons.appendChild(exportBtn);-->

<!--        // Add print button-->
<!--        const printBtn = document.createElement('button');-->
<!--        printBtn.className = 'btn btn-secondary';-->
<!--        printBtn.innerHTML = 'ðŸ–¨ï¸ Print List';-->
<!--        printBtn.onclick = printPupilsList;-->
<!--        actionButtons.appendChild(printBtn);-->
<!--    }-->

<!--    // Call addExportButtons after DOM is loaded-->
<!--    document.addEventListener('DOMContentLoaded', () => {-->
<!--        setTimeout(addExportButtons, 100);-->
<!--    });-->

<!--    // Keyboard shortcuts-->
<!--    document.addEventListener('keydown', (e) => {-->
<!--        // Ctrl/Cmd + K to focus search-->
<!--        if ((e.ctrlKey || e.metaKey) && e.key === 'k') {-->
<!--            e.preventDefault();-->
<!--            document.getElementById('nameFilter').focus();-->
<!--        }-->

<!--        // Escape to close modals-->
<!--        if (e.key === 'Escape') {-->
<!--            const openModals = document.querySelectorAll('.modal[style*="block"]');-->
<!--            openModals.forEach(modal => {-->
<!--                modal.style.display = 'none';-->
<!--            });-->
<!--        }-->

<!--        // Ctrl/Cmd + N to add new pupil-->
<!--        if ((e.ctrlKey || e.metaKey) && e.key === 'n') {-->
<!--            e.preventDefault();-->
<!--            openAddPupilModal();-->
<!--        }-->
<!--    });-->

<!--    // Auto-refresh functionality (optional)-->
<!--    let autoRefreshInterval;-->

<!--    function startAutoRefresh() {-->
<!--        // Refresh every 5 minutes-->
<!--        autoRefreshInterval = setInterval(() => {-->
<!--            loadSummary();-->
<!--        }, 5 * 60 * 1000);-->
<!--    }-->

<!--    function stopAutoRefresh() {-->
<!--        if (autoRefreshInterval) {-->
<!--            clearInterval(autoRefreshInterval);-->
<!--        }-->
<!--    }-->

<!--    // Start auto-refresh when dashboard is shown-->
<!--    function showDashboard() {-->
<!--        document.getElementById('loginSection').style.display = 'none';-->
<!--        document.getElementById('dashboardSection').style.display = 'block';-->
<!--        startAutoRefresh();-->
<!--    }-->

<!--    // Stop auto-refresh on logout-->
<!--    function logout() {-->
<!--        stopAutoRefresh();-->
<!--        authToken = '';-->
<!--        localStorage.removeItem('authToken');-->
<!--        document.getElementById('loginSection').style.display = 'flex';-->
<!--        document.getElementById('dashboardSection').style.display = 'none';-->
<!--    }-->

<!--    // Performance optimization: Debounce name filter-->
<!--    let filterTimeout;-->
<!--    function filterPupilsByName() {-->
<!--        clearTimeout(filterTimeout);-->
<!--        filterTimeout = setTimeout(() => {-->
<!--            const filter = document.getElementById('nameFilter').value.toLowerCase();-->
<!--            filteredPupils = allPupils.filter(pupil =>-->
<!--                pupil.name.toLowerCase().includes(filter)-->
<!--            );-->
<!--            displayPupils();-->
<!--        }, 300);-->
<!--    }-->

<!--    // Connection status indicator-->
<!--    function checkConnection() {-->
<!--        return navigator.onLine;-->
<!--    }-->

<!--    function showConnectionStatus() {-->
<!--        const isOnline = checkConnection();-->
<!--        if (!isOnline) {-->
<!--            const offlineAlert = document.createElement('div');-->
<!--            offlineAlert.className = 'alert alert-error';-->
<!--            offlineAlert.style.position = 'fixed';-->
<!--            offlineAlert.style.top = '20px';-->
<!--            offlineAlert.style.right = '20px';-->
<!--            offlineAlert.style.zIndex = '9999';-->
<!--            offlineAlert.textContent = 'You are offline. Some features may not work.';-->
<!--            document.body.appendChild(offlineAlert);-->

<!--            setTimeout(() => {-->
<!--                document.body.removeChild(offlineAlert);-->
<!--            }, 5000);-->
<!--        }-->
<!--    }-->

<!--    window.addEventListener('online', () => {-->
<!--        console.log('Connection restored');-->
<!--        loadSummary();-->
<!--    });-->

<!--    window.addEventListener('offline', showConnectionStatus);-->

<!--    console.log('ðŸŽ“ Jezvid School Management System Loaded Successfully!');-->
<!--    console.log('ðŸ’¡ Keyboard shortcuts:');-->
<!--    console.log('   - Ctrl/Cmd + K: Focus search');-->
<!--    console.log('   - Ctrl/Cmd + N: Add new pupil');-->
<!--    console.log('   - Escape: Close modals');-->
<!--</script>-->
<!--</body>-->
<!--</html>-->
